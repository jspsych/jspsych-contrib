# plugin-histogram-button-response

## Overview

The `histogram-button-response` plugin displays a histogram chart and records responses generated by a button click. The chart can be displayed until a response is given, or for a pre-determined amount of time. The trial can be ended automatically if the participant does not respond within a fixed length of time. The button itself can be customized using HTML formatting.

The histogram stimulus is generated from a numeric array of data, with optional parameters for setting the number of bins to use. You can also add an annotation to the chart by setting the bin corresponding to a particular score as a different colour, with a corresponding text annotation.

This plugin uses [Chart.js](https://www.chartjs.org/) under the hood, and supports features like axis labeling, legend display, and percentage formatting on the y-axis.

---

## Loading (Note: these CDN resources don't currently exist... but maybe will eventually?)

Using the CDN-hosted JavaScript file:

```js
<script src="https://unpkg.com/@jspsych/plugin-histogram-button-response@VERSION_HERE"></script>
```

Using the JavaScript file downloaded from a GitHub release dist archive:

```js
<script src="jspsych/plugin-histogram-button-response.js"></script>
```

Using NPM:

```
npm install @jspsych/plugin-histogram-button-response
```

```js
import jsPsychHistogramButtonresponse from "@jspsych/plugin-histogram-button-response";
```

---

## Compatibility

- jsPsych version: **v8.0.0 or later**

---

## Parameters

| Name               | Type             | Default       | Description                                                      |
| ------------------ | ---------------- | ------------- | ---------------------------------------------------------------- |
| `description_text` | HTML string      | `undefined`   | Optional text shown above the chart for instructions or context. |
| `chart_data`       | Array of numbers | `undefined`   | Required numeric data used to generate the histogram.            |
| `n_bins`           | Integer          | `10`          | Number of bins to use when grouping the values.                  |
| `n_x_labels`       | Integer          | `5`           | Maximum number of tick marks on the x-axis.                      |
| `n_y_labels`       | Integer          | `5`           | Maximum number of tick marks on the y-axis.                      |
| `base_color`       | String (color)   | `"#02c39a80"` | Color used for histogram bars except the highlighted one.        |
| `highlight_color`  | String (color)   | `"#fee44080"` | Color used to fill the highlighted bin.                          |
| `highlight_score`  | Number           | `null`        | A numeric value used to identify the bin to highlight.           |
| `highlight_label`  | String           | `null`        | Label text shown above the highlighted bin.                      |
| `x_axis_label`     | String           | `""`          | Label for the x-axis.                                            |
| `y_axis_label`     | String           | `""`          | Label for the y-axis.                                            |
| `y_percent`        | Boolean          | `false`       | If true, scales y-axis from 0 to 1 and formats as percentages.   |
| `show_legend`      | Boolean          | `false`       | Whether to show a legend beside the chart.                       |
| `choices`          | Array of strings | `undefined`   | Labels for the response buttons.                                 |
| `button_html`      | Function         | _(see below)_ | Function that returns the HTML string for each button.           |

**Default `button_html` function:**

```ts
(choice: string, choice_index: number) =>
  `<button class="jspsych-btn">${choice}</button>`;
```

---

## Data Generated

| Name       | Type    | Description                                                     |
| ---------- | ------- | --------------------------------------------------------------- |
| `rt`       | Integer | Response time in milliseconds from trial start to button click. |
| `response` | Integer | Index (0-based) of the selected button in the `choices` array.  |

---

## Example

```js
const trial = {
  type: "histogram-button-response",
  description_text: "<p>Which distribution best represents this data?</p>",
  chart_data: [21, 22, 22, 24, 25, 25, 26, 27, 28, 29, 30, 32],
  n_bins: 6,
  highlight_score: 25,
  highlight_label: "Target",
  base_color: "#8888cc80",
  highlight_color: "#ff6600",
  x_axis_label: "Score",
  y_axis_label: "Count",
  y_percent: false,
  choices: ["Low", "Medium", "High"],
};
```

---

## Documentation

See [documentation](https://github.com/themusiclab/pose/tree/main/plugin-histogram-button-response/README.md)

---

## Author / Citation

[Courtney B. Hilton](https://github.com/courtney-bryce-hilton)  
If you use this plugin in your research, please cite the corresponding repository or paper when available.
